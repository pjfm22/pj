<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcular Desconto</title>
    <style>
                body {
    background-color: #F2F2F2; /* Cor de fundo suave */
    color: #333; /* Cor do texto */
    font-family: Arial, sans-serif;
    padding: 20px;
    box-sizing: border-box;
    background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQj4ShYamRNbzgOpvgm-ycnzmwdMe9ghO5Qg&usqp=CAU');
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
}

        h2, p, label, input, button, select {
            display: block;
            margin: 10px auto;
        }

        h2 {
            margin-bottom: 20px;
            font-weight: 900;
            color: #3498db;
        }

        p {
            font-size: 18px;
            color: #fff;
        }

        label {
            font-weight: bold;
            color: #65ff00;
        }

        button {
            padding: 10px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #45a049;
        }

        input, select {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            color: #000; /* Adicionado para números em preto */
        }
    </style>
</head>
<body>
    
    <h2>Calcular Valor por kg</h2>
    
    <label for="st1">Valor da Mercadoria:</label>
    <input type="number" id="st1">
    
    <label for="pb1">Peso Bruto:</label>
    <input type="number" id="pb1">
    
    <button onclick="calcularDivisao()">Calcular</button>
    
    <p id="resultado1"></p>
    <br>
    <br>

    <h2>Calcular Tolerância</h2>

    <p>
        Aviso: Se a tolerância for 0,0% desconte toda a quebra!
    </p>

    <label for="valor">Peso Origem:</label>
  <input type="text" id="valor">

  <label for="porcentagem">Tolerância</label>
  <select id="porcentagem">
    <option value="0.0025">0,25%</option>
    <option value="0.0020">0,20%</option>
    <option value="0.0000">0,00%</option>
  </select>

  <button onclick="calcularPorcentagem()">Calcular</button>

  <p id="resultado"></p>
    <br>
    
    <h2>Calcular quantidade de kg a ser descontado </h2>
    <form>
        <label for="valor1">Quebra de carga</label>
        <input type="number" id="valor1" name="valor1" required>

        <label for="valor2">Tolerância em kg</label>
        <input type="number" id="valor2" name="valor2" required>

        <button type="button" onclick="subtrairValores()">Calcular</button>

        <p id="resultadoSubtracao"></p>        
    </form>
    <br>
    
    <h2>Valor em Reais a descontar</h2>
    <form>
        <label for="valorPorKg">Valor por kg:</label>
        <input type="number" id="valorPorKg" name="valorPorKg">

        <label for="quebra">Kg a ser descontado:</label>
        <input type="number" id="quebra" name="quebra">

        <button type="button" onclick="calcularTotal()">Calcular Total</button>

        <p id="resultadoTotal"></p>
    </form>

    <br>

    <h2>Calcular Saldo</h2>

<label for="pesoMenor">Peso Menor:</label>
<input type="number" id="pesoMenor" step="0.01" placeholder="Informe o Peso Menor">

<label for="freteCombinado">Frete Combinado(Tar):</label>
<input type="number" id="freteCombinado" step="0.01" placeholder="Informe o Frete Combinado(Tar)">

<button onclick="calcularSaldo()">Calcular</button>

<p>Resultado: <span id="resultadoSaldo"></span></p>

    <h3>Insirir Descontos:</h3>

    <label for="manual1">Desconto da quebra em R$</label>
<input type="text" id="manual1" placeholder="Clique aqui Jovem" readonly>

<br>
<br>
    <label for="manual2">Valores restantes a serem Descontados:</label>
    <input type="text" id="manual2" placeholder="Clique aqui Jovem" oninput="calcularResultado()">

    <label for="manual3"></label>
    <input type="text" id="manual3" placeholder="Clique aqui Jovem" oninput="calcularResultado()">

    <label for="manual4"></label>
    <input type="text" id="manual4" placeholder="Clique aqui Jovem" oninput="calcularResultado()">

    <label for="manual5"></label>
    <input type="text" id="manual5" placeholder="Clique aqui Jovem" oninput="calcularResultado()">

    <label for="manual6"></label>
    <input type="text" id="manual6" placeholder="Clique aqui Jovem" oninput="calcularResultado()">

    <label for="manual7"></label>
    <input type="text" id="manual7" placeholder="Clique aqui Jovem" oninput="calcularResultado()">

    <script>
        function formatarNumero(numero) {
        return numero.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&.').replace('.', ',');
    }

    function calcularResultado() {
    // Obter os valores dos inputs
    const manual1 = parseFloat(document.getElementById('manual1').value.replace(/\./g, '').replace(',', '.')) || 0;
    const manual2 = parseFloat(document.getElementById('manual2').value.replace(/\./g, '').replace(',', '.')) || 0;
    const manual3 = parseFloat(document.getElementById('manual3').value.replace(/\./g, '').replace(',', '.')) || 0;
    const manual4 = parseFloat(document.getElementById('manual4').value.replace(/\./g, '').replace(',', '.')) || 0;
    const manual5 = parseFloat(document.getElementById('manual5').value.replace(/\./g, '').replace(',', '.')) || 0;
    const manual6 = parseFloat(document.getElementById('manual6').value.replace(/\./g, '').replace(',', '.')) || 0;
    const manual7 = parseFloat(document.getElementById('manual7').value.replace(/\./g, '').replace(',', '.')) || 0;

    // Calcular o resultado somando os valores dos inputs
    const resultado = manual1 + manual2 + manual3 + manual4 + manual5 + manual6 + manual7;

    // Exibir o resultado onde desejar
    console.log('Resultado:', resultado);
    // Se você quiser exibir o resultado em algum lugar específico na página, substitua o console.log pelo código correspondente.
    atualizarResultadoSaldo(); // Adiciona essa chamada para atualizar o saldo ao calcular o resultado
}

function atualizarResultadoSaldo() {
    const pesoMenor = parseFloat(document.getElementById('pesoMenor').value) || 0;
    const freteCombinado = parseFloat(document.getElementById('freteCombinado').value) || 0;

    const resultadoMultiplicacao = pesoMenor * freteCombinado;

    const valoresManuais = Array.from({ length: 7 }, (_, index) => {
        const valorManual = parseFloat(document.getElementById(`manual${index + 1}`).value.replace(/\./g, '').replace(',', '.')) || 0;
        return valorManual;
    });

    const resultadoFinal = resultadoMultiplicacao - valoresManuais.reduce((acc, val) => acc + val, 0);

    document.getElementById('resultadoSaldo').innerText = formatarNumero(resultadoFinal);
}

// Adiciona eventos de input para cada campo manual
for (let i = 1; i <= 7; i++) {
    document.getElementById(`manual${i}`).addEventListener('input', () => {
        calcularResultado(); // Recalcula o resultado ao inserir valores manuais
    });
}


function calcularSaldo() {
    const pesoMenor = parseFloat(document.getElementById('pesoMenor').value) || 0;
    const freteCombinado = parseFloat(document.getElementById('freteCombinado').value) || 0;

    const resultadoMultiplicacao = pesoMenor * freteCombinado;

    const valoresManuais = Array.from({ length: 7 }, (_, index) => {
        const valorManual = parseFloat(document.getElementById(`manual${index + 1}`).value.replace(/\./g, '').replace(',', '.')) || 0;
        return valorManual;
    });

    const resultadoFinal = resultadoMultiplicacao - valoresManuais.reduce((acc, val) => acc + val, 0);

    document.getElementById('resultadoSaldo').innerText = formatarNumero(resultadoFinal);
}



        function calcularDivisao() {
    // Obter valores dos campos
    var valorMercadoria = parseFloat(document.getElementById('st1').value);
    var pesoBruto = parseFloat(document.getElementById('pb1').value);

    // Verificar se os valores são numéricos e não estão fora da faixa
    if (!isNaN(valorMercadoria) && !isNaN(pesoBruto) && pesoBruto !== 0) {
        // Calcular a divisão
        var resultado = valorMercadoria / pesoBruto;

        // Verificar se o resultado é um número válido
        if (!isNaN(resultado) && isFinite(resultado)) {
            // Exibir o resultado
            document.getElementById('resultado1').innerText = 'Resultado: ' + formatarNumero(resultado);

            // Imprimir o resultado no elemento "valorPorKg"
            exibirResultadoValorPorKg(resultado);
        } else {
            // Exibir mensagem de erro se o resultado não for válido
            document.getElementById('resultado1').innerText = 'Erro: Resultado inválido.';
        }
    } else {
        // Exibir mensagem de erro se os valores não forem válidos
        document.getElementById('resultado1').innerText = 'Por favor, insira valores válidos.';
    }
}

function exibirResultadoValorPorKg(resultado) {
    // Coloque o resultado no elemento "valorPorKg"
    document.getElementById('valorPorKg').value = resultado.toFixed(2);
}



        function calcularPorcentagem() {
      const valorInput = document.getElementById('valor');
      const porcentagemSelect = document.getElementById('porcentagem');
      const resultadoOutput = document.getElementById('resultado');

      if (valorInput && porcentagemSelect && resultadoOutput) {
        const valorManualString = valorInput.value;
        const valorManual = parseFloat(valorManualString.replace(/\./g, '').replace(',', '.')) || 0;
        const porcentagem = parseFloat(porcentagemSelect.value) || 0;
        const resultado = valorManual * porcentagem;
        resultadoOutput.innerHTML = `Resultado: ${resultado.toFixed(2)}`;
      } else {
        console.error('Um ou mais elementos não foram encontrados.');
      }
    }

    function calcularTotal() {
    var valorPorKg = parseFloat(document.getElementById("valorPorKg").value);
    var quebra = parseFloat(document.getElementById("quebra").value);
    var manual1Element = document.getElementById("manual1");

    if (!isNaN(valorPorKg) && !isNaN(quebra)) {
        var valorTotal = valorPorKg * quebra;

        // Set the result in the "manual1" input field with comma
        manual1Element.value = valorTotal.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

        // Display the result in the "resultadoTotal" element
        document.getElementById("resultadoTotal").innerText = "Valor a descontar do saldo: " + valorTotal.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    } else {
        // Handle the case where the entered values are not valid numbers
        document.getElementById("resultadoTotal").innerText = "Por favor, insira valores válidos.";
    }
}

     
        function calcularPorcentagem() {
    const valorInput = document.getElementById('valor');
    const porcentagemSelect = document.getElementById('porcentagem');
    const resultadoOutput = document.getElementById('resultado');
    const valor2Input = document.getElementById('valor2');

    if (valorInput && porcentagemSelect && resultadoOutput && valor2Input) {
        const valorManualString = valorInput.value;
        const valorManual = parseFloat(valorManualString.replace(/\./g, '').replace(',', '.')) || 0;
        const porcentagem = parseFloat(porcentagemSelect.value) || 0;

        if (porcentagem === 0) {
            resultadoOutput.innerHTML = 'Descontar toda a quebra da carga';
            // Definir o valor 0 no elemento "valor2"
            valor2Input.value = 0;
        } else {
            const resultadoEmKg = valorManual * porcentagem;
            resultadoOutput.innerHTML = `Quebra Tolerável: ${resultadoEmKg.toFixed(2)} kg`;
            // Definir o resultado no elemento "valor2"
            valor2Input.value = resultadoEmKg.toFixed(2);
        }
    } else {
        console.error('Um ou mais elementos não foram encontrados.');
    }
}




        function subtrairValores() {
        var valor1 = parseFloat(document.getElementById("valor1").value);
        var valor2 = parseFloat(document.getElementById("valor2").value);

        // Check if the entered values are valid numbers
        if (!isNaN(valor1) && !isNaN(valor2)) {
            var resultado = valor1 - valor2;

            // Set the result in the "quebra" input field
            document.getElementById("quebra").value = resultado.toFixed(2);

            // Optional: Display the result in kilograms
            document.getElementById("resultadoSubtracao").innerText = "Resultado: " + resultado.toFixed(2) + " kg";
        } else {
            // Handle the case where the entered values are not valid numbers
            document.getElementById("resultadoSubtracao").innerText = "Por favor, insira valores válidos.";
        }
    }

        
        function exibirResultadoValorPorKg(resultado) {
    // Coloque o resultado no elemento "valorPorKg"
    document.getElementById('valorPorKg').value = resultado.toFixed(2);
}
    </script>

</body>
</html>
